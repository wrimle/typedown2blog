#!/usr/bin/env ruby

require 'fileutils'
require 'rubygems'
$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', 'lib'))
$LOAD_PATH.unshift(File.dirname(__FILE__))
require 'typedown2blog'

include Typedown2Blog

begin
  require 'blog_config'
rescue MissingSourceFile => err
  puts "Put your mail settings in blog_config.rb"
  exit
end


unless Typedown2Blog::Blog.email
  puts "#{__FILE__} blog_email incoming_mails_glob"
  puts "Or specify in blog_config.rb"
  exit
end

ARGV.each do |filename|
  Blog.post filename
end
